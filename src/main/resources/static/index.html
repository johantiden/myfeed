<html lang="en">
<head>
    <link rel="stylesheet" href="css/app.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script type="text/javascript" src="./bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="./bower_components/angular-resource/angular-resource.js"></script>
    <script type="text/javascript" src="./bower_components/angular-cookies/angular-cookies.js"></script>
    <script type="text/javascript" src="./bower_components/angular-animate/angular-animate.js"></script>
    <script type="text/javascript" src="./bower_components/ngInfiniteScroll/build/ng-infinite-scroll.js"></script>
    <script type="text/javascript" src="./app/app.js"></script>
    <script type="text/javascript" src="./app/controllers.js"></script>
    <script type="text/javascript" src="./app/services.js"></script>
</head>
<body>
<div ng-app="myApp" ng-controller="myCtrl">
    <div class="navbar">
        <div class="btn-group">
            <form>
                <input type="radio" ng-model="radioFilter" name="category" id="all-radio" value="" checked><label for="all-radio">All</label>
                <input type="radio" ng-model="radioFilter" name="category" id="news-radio" value="news"><label for="news-radio">News</label>
                <input type="radio" ng-model="radioFilter" name="category" id="fun-radio" value="fun"><label for="fun-radio">Fun</label>
                <input type="radio" ng-model="radioFilter" name="category" id="read-radio" value='"read":true'><label for="read-radio">Read</label>
                <input type="radio" ng-model="radioFilter" name="category" id="flagged-radio" value='"flagged":true'><label for="flagged-radio">Flagged</label>
                <input type="radio" ng-model="radioFilter" name="category" id="saved-radio" value="saved"><label for="saved-radio">Saved</label>
            </form>
        </div>

        <div style="vertical-align:baseline; float: right;" >
            Keys:{{keys.length}} | Items:{{items.length}} | unread:{{(items | filter:{read:false}).length}} | limit:{{itemLimit}}
        </div>
        <div style="vertical-align:baseline; float: right; margin-right: 5px;">
            <button id="mark-all-as-read-button" ng-click="markAllAsRead()">Mark all as read</button>
        </div>
    </div>
    <div class="inf-scroll" infinite-scroll="increaseLimit()" infinite-scroll-distance="15">
    <div class="item-box {{item.cssClass}} {{item.read ? 'read' : ''}} {{item.flagged ? 'flagged' : ''}}"
        ng-repeat="item in items | filter:radioFilter | filter:myFilter | orderBy:'-publishedDate.epochSecond' | limitTo:itemLimit | limitTo:1000">

        <div class="content-box">
            <div class="top-row">
                <button class="read-button" ng-model="item.read" ng-click="setDocumentRead(item, true)" ></button>
                <div class="feedName" ng-if="item.feed.name"><a href="{{item.feed.url}}">{{item.feed.name}}</a></div>
                <div class="score" ng-if="item.score"> | {{item.score}}</div>
                <div class="category" ng-if="item.category.name"> | <a href="{{item.category.url}}">{{item.category.name}}</a></div>
                <div class="author" ng-if="item.author.name"> | <a href="{{item.author.url}}">{{item.author.name}}</a></div>
                <div class="time-since" ng-if="item.publishedDateShort"> | {{item.publishedDateShort}}</div>
            </div>


            <div class="title" ng-if="item.title"><a class="link" href="{{item.pageUrl}}" >{{item.title}}</a></div>
            <div class="text" ng-if="item.text && !item.html">{{item.text}}</div>


            <span class="htmlContent" ng-bind-html="$sce.trustAsHtml(item.html)"></span>
            <div ng-if="item.imageUrl" class="image-box">
                <a href="{{item.pageUrl}}">
                    <img class="image-box-image" src="{{item.imageUrl}}" />
                </a>
            </div>

        </div>
    </div>
    </div>
</div>
</body>
</html>
